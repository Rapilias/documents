## 実装済み

## 案
### Bound
カテゴリ: `弾`, `銃パッシブ`,`生徒パッシブ`, `ステージModifier`  
内容:  
`Bound`は**全ての遠距離攻撃物**に**追加の跳ね返りチャンス**を与えます。  
`Bound`が跳ね返る方向は光の反射のような挙動のようになります。  
  + 命中した地点をの壁となる要素を取得し、その法線方向を利用した反射方向を算出します
  + `Bound`の持つ`Homing`の角度内に`敵対要素`が存在する場合、向きを補正します
  + `Attribute`によって算出基準のロジックが変化する事があります
  
`Bound`によって跳ね返る攻撃は、跳ね返りの回数によって`威力`, `攻撃物移動速度`, `Bound.Count` が減少します。  
`Bound`は以下の条件を全て満たす事によって発動します。  
+ ゲーム内で`Bound`が有効であること
+ `Bound`が1以上の**遠距離攻撃によって発生した攻撃物**であること
  + `壁`か `敵対要素` か`汎用オブジェクト`に命中する事
+ 攻撃物移動速度が**発射直後速度の10%以上**であること
  + `Bound`時に発射直後速度は**リセットされない**
+ 命中対象が`Bound無効`を発動していない事
  
パラメータ:  
`Homing`: 反射時、角度内に居る敵対要素に向きを補正する。  
`Count`: 反射可能回数、0以下になった状態で衝突した際は反射が行われない。  
`Delay`: 反射時に攻撃物が反射地点で待機する時間。`Homing`は`Delay`後に判定される。  
  
Attribute:  
ZigZag: 反射時、必ず反対かつ発射時の前方へ飛ぶ。  
Reflect: 反射時、必ず前方を逆転させて飛ぶ。  

シナジー:
`Bound`は`Penetrate`と同時に発生することが可能。(`Penetrate`項を参照)
  
### Penetrate
カテゴリ: `弾`, `銃パッシブ`,`生徒パッシブ`, `ステージModifier`  
内容:  
`Penetrate`は**全ての遠距離攻撃物**に**追加の貫通チャンス**を与えます。  
`Penetrate`は`Bound`と同時に発生する事はありません。
攻撃物が貫通すると以下の事象が発生します。  
+ 貫通した対象が攻撃物内で記録され、同じ攻撃物が再度命中する事は無くなる。  
  + 攻撃物から派生した別の攻撃物は生成元攻撃物の命中済み記録を`引き継がない`。
+ `Penetrate.Count`が`1`以上であれば`Penetrate.Count`が`1`減少する。
+ `Penetrate.Count`が0以下であれば攻撃物は`消滅`する。
+ `Penetrate.Power`と攻撃物の基礎火力に応じてシールドに追加ダメージを与える。

パラメータ:  
`Count`: 貫通可能回数、0以下になった状態で衝突した際は攻撃物は消滅する。  
`Power`: 貫通時にシールドに追加ダメージを与える。  

シナジー:
+ `Penetrate`は`Bound`と同時に発生することが可能。
  + `Bound`が`敵対要素` か`汎用オブジェクト`に対して発生した際、直前より古い命中済み記録がリセットされる。
  + `Bound.Count`より先に`Penetrate.Count`が0になった場合、以降のダメージ判定に`Penetrate`の効果が付与されなくなる

### Reflect
カテゴリ: `DamageReciver`, `バフ`, `ステージModifier`  
内容:  
`Reflect`は`条件に合致した遠距離攻撃物が命中した際に攻撃物の所有権をReflect所有者に委譲して`再発射します。  
`Reflect`は以下の条件を満たすことで発動します。  
+ `Reflect`が付与されている`DamageReciver`に遠距離攻撃物が命中する。
  + `UnReflectable`が付与されていない。
  + `Reflect.DamageLimit`が**1以上**。
`Reflect`が発生すると、以下の処理が発生します。  
+ `Reflect.DamageLimit`から`DamageObject`の基礎ダメージを減らす
  + `貫通属性`の場合は2倍減らす。
  + 0以下になった場合、**`Reflect`した上で**効果が消滅する。
+ `DamageObject`の発生者情報が`Reflect`所有者に置き換わる
+ `DamageObject`に付与されている全てのバフの半減した攻撃物を、攻撃物の進行方向と逆方向に向けて再発射する。
  + 反射した攻撃物の基礎ダメージは、`Reflection.Quality`によって50% ~ 120%の間で変動する？
  + プレイヤーグループに対するダメージは**被弾対象の最大HPの50%を超えない**。  

`Seconds`: 効果の有効秒数。   
`DamageLimit`: `Reflect`が受け止められる合計基礎ダメージ。   
`Quality`: 反射時の攻撃物の基礎ダメージ倍率。  
